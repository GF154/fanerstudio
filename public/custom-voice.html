<!DOCTYPE html>
<html lang="ht">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üó£Ô∏è Vwa Natir√®l - Faner Studio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeIn 0.8s ease-in;
        }
        
        .flag-container {
            width: 80px;
            margin: 0 auto 20px auto;
        }
        
        .flag-img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            text-decoration: none;
            color: white;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-5px);
        }
        
        .tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .tab {
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }
        
        .tab.active {
            background: rgba(255, 255, 255, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.6);
        }
        
        .main-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: slideIn 0.3s ease-in;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .info-box {
            background: rgba(66, 153, 225, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #4299e1;
        }
        
        .warning-box {
            background: rgba(255, 193, 7, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
        }
        
        .upload-section {
            background: rgba(255, 255, 255, 0.15);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            text-align: center;
            transition: all 0.3s;
        }
        
        .upload-section:hover {
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .upload-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        .file-input-wrapper {
            position: relative;
            display: inline-block;
            margin: 20px 0;
        }
        
        input[type="file"] {
            display: none;
        }
        
        .file-input-label {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 40px;
            border-radius: 30px;
            cursor: pointer;
            display: inline-block;
            transition: all 0.3s;
            font-size: 1.1em;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .file-input-label:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .recording-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .record-btn {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255, 0, 0, 0.7);
            border: 5px solid white;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin: 20px 0;
        }
        
        .record-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(255, 0, 0, 0.5);
        }
        
        .record-btn.recording {
            animation: pulse 1.5s infinite;
            background: rgba(255, 0, 0, 0.9);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .timer {
            font-size: 2em;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .audio-samples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .sample-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .sample-icon {
            font-size: 2.5em;
        }
        
        .sample-info {
            flex-grow: 1;
        }
        
        .sample-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .sample-duration {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .remove-sample {
            background: rgba(255, 0, 0, 0.6);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
        }
        
        .remove-sample:hover {
            background: rgba(255, 0, 0, 0.8);
        }
        
        .option-group {
            margin: 20px 0;
        }
        
        .option-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        select, input[type="text"], input[type="number"], textarea {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 1em;
            margin-top: 5px;
        }
        
        .voice-library {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .voice-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .voice-card:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.4);
        }
        
        .voice-card.active {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
        }
        
        .voice-avatar {
            font-size: 4em;
            margin-bottom: 15px;
        }
        
        .voice-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .voice-details {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .voice-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }
        
        .play-btn {
            background: rgba(76, 175, 80, 0.7);
            color: white;
        }
        
        .play-btn:hover {
            background: rgba(76, 175, 80, 0.9);
        }
        
        .delete-btn {
            background: rgba(244, 67, 54, 0.7);
            color: white;
        }
        
        .delete-btn:hover {
            background: rgba(244, 67, 54, 0.9);
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }
        
        .generate-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 30px;
            color: white;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 30px;
        }
        
        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .generate-btn:disabled {
            background: gray;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-section {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }
        
        .progress-section.active {
            display: block;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .result-section {
            display: none;
            margin-top: 30px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
        }
        
        .result-section.active {
            display: block;
        }
        
        .success-icon {
            font-size: 5em;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .download-btn {
            padding: 15px 35px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            border: none;
            border-radius: 30px;
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }
        
        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .quality-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .quality-option {
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .quality-option:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .quality-option.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
        }
        
        .quality-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .quality-desc {
            font-size: 0.85em;
            opacity: 0.9;
        }
        
        .feature-highlight {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #ffd700;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
        }
        
        .feature-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }
        
        .feature-icon-small {
            font-size: 2em;
        }
        
        .stats-bar {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .export-btn {
            padding: 15px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            color: white;
        }
        
        .export-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            border-color: #ffd700;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.9);
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="/" class="back-btn">‚Üê Retounen Ak√®y</a>
        
        <header>
            <div class="flag-container">
                <img src="/assets/Flag_of_Haiti.webp" alt="üá≠üáπ" class="flag-img">
            </div>
            <h1>üó£Ô∏è Kreye Vwa Natir√®l</h1>
            <p class="subtitle">Klone vwa ou oswa kreye nouvo vwa inyk</p>
        </header>
        
        <div class="tabs">
            <button class="tab active" data-tab="create">üé§ Kreye Vwa</button>
            <button class="tab" data-tab="library">üìö Vwa Mwen Yo</button>
            <button class="tab" data-tab="test">üß™ Test Vwa</button>
        </div>
        
        <div class="main-content">
            <!-- CREATE TAB -->
            <div class="tab-content active" id="create">
                <div class="info-box">
                    <strong>‚ÑπÔ∏è Kijan sa fonksyone:</strong> Upload 1 fichye odyo (1-3 minit) pou kreye yon vwa natir√®l ki sanble ak vwa ou upload la. Sist√®m nan ap ekstr√® tonalite ak karakteristik vwa ou otomatikman!
                </div>
                
                <div class="feature-highlight">
                    <strong>‚ú® NOUVO: Features Avanse!</strong><br>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <div class="feature-icon-small">üéØ</div>
                            <div>Match Vwa Otomatik</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon-small">üåç</div>
                            <div>Sip√≤ Multi-Lang</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon-small">üé≠</div>
                            <div>Kontw√≤l Emosyon</div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon-small">‚ö°</div>
                            <div>Preview Direkteman</div>
                        </div>
                    </div>
                </div>
                
                <div class="warning-box">
                    <strong>‚ö†Ô∏è Enp√≤tan:</strong> S√®lman itilize odyo ou genyen dwa itilize. Pa kopi vwa moun san p√®misyon yo.
                </div>
                
                <h2>üìä Chwazi Kalite</h2>
                <div class="quality-selector">
                    <div class="quality-option" data-quality="basic">
                        <div class="quality-name">ü•â Pi Ba</div>
                        <div class="quality-desc">Rapid, kalite akseptab</div>
                    </div>
                    <div class="quality-option selected" data-quality="medium">
                        <div class="quality-name">ü•à Nan Mitan</div>
                        <div class="quality-desc">Balanse, bon kalite</div>
                    </div>
                    <div class="quality-option" data-quality="premium">
                        <div class="quality-name">ü•á Pi Wo</div>
                        <div class="quality-desc">Kalite sipery√®</div>
                    </div>
                </div>
                
                <h2 style="margin-top: 30px;">üéôÔ∏è Upload Echantiyon Vwa</h2>
                
                <div class="tabs" style="margin: 20px 0;">
                    <button class="tab active" data-subtab="upload">üì§ Upload</button>
                    <button class="tab" data-subtab="record">üé§ Record</button>
                </div>
                
                <!-- Upload Section -->
                <div class="subtab-content active" id="upload">
                    <div class="upload-section">
                        <div class="upload-icon">üéµ</div>
                        <h3>Upload 1 Fichye Odyo S√®lman</h3>
                        <p>MP3, WAV, M4A, OGG oswa OPUS (Rek√≤mande: 1-3 minit)</p>
                        
                        <div class="file-input-wrapper">
                            <input type="file" id="audioInput" accept="audio/*" single>
                            <label for="audioInput" class="file-input-label">
                                üìÅ Chwazi 1 Fichye Odyo
                            </label>
                        </div>
                        
                        <div class="info-box" style="margin-top: 20px; text-align: left;">
                            <strong>üí° Tips pou ekstr√® vwa natir√®l ou:</strong>
                            <ul style="margin-top: 8px; padding-left: 20px;">
                                <li>Itilize odyo ki kl√®, san bri</li>
                                <li>Menm moun ap pale pandan tout tan an</li>
                                <li>1-3 minit odyo ase pou bon rezilta</li>
                                <li>Sist√®m nan ap ekstr√® tonalite ak karakteristik vwa ou otomatikman</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Record Section -->
                <div class="subtab-content" id="record" style="display: none;">
                    <div class="recording-section">
                        <h3>üé§ Anrejistre Vwa Ou</h3>
                        <p>Li t√®ks sa yo ak vwa ou:</p>
                        
                        <div class="info-box" style="text-align: left; margin: 20px 0;">
                            <strong>üìù T√®ks pou li:</strong><br><br>
                            1. "Bonjou, non m se [non ou], epi sa se vwa m."<br>
                            2. "Mwen renmen pale Krey√≤l, paske se lang natif natal mwen."<br>
                            3. "Jodi a, mwen ap kreye yon vwa dijital pou platf√≤m sa a."
                        </div>
                        
                        <button class="record-btn" id="recordBtn">üé§</button>
                        <div class="timer" id="timer">00:00</div>
                        <p id="recordStatus">Klike sou mikwof√≤n pou k√≤manse</p>
                    </div>
                </div>
                
                <!-- Audio Samples List -->
                <div id="samplesContainer">
                    <h3 style="margin: 30px 0 15px 0;">üìÇ Echantiyon Upload (1 fichye maksim√≤m)</h3>
                    <div class="audio-samples" id="audioSamples">
                        <!-- Sample will be added here -->
                    </div>
                </div>
                
                <!-- Voice Details -->
                <div class="option-group" style="margin-top: 30px;">
                    <label>üè∑Ô∏è Non Vwa</label>
                    <input type="text" id="voiceName" placeholder="Egzanp: Vwa Mwen, Jean Vwa Pwofesyon√®l...">
                </div>
                
                <div class="option-group">
                    <label>üìù Deskripsyon (Opsyon√®l)</label>
                    <textarea id="voiceDescription" placeholder="Deskri vwa sa a... (pa egzanp: vwa kalm, pwofesyon√®l, etc.)"></textarea>
                </div>
                
                <div class="option-group">
                    <label>üé≠ Emosyon Default <span class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">Emosyon ki pral itilize pa default pou vwa sa a</span></span></label>
                    <select id="voiceEmotion">
                        <option>N√≤mal - Vwa regilye</option>
                        <option>Kontan - Vwa av√®k lajwa</option>
                        <option>Kalm - Vwa trankil</option>
                        <option>Pwofesyon√®l - F√≤m√®l</option>
                        <option>En√®jik - Plen lavi</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label>üåç Lang Prensipal</label>
                    <select id="voiceLanguage">
                        <option value="ht" selected>Krey√≤l Ayisyen</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label>üéµ F√≤ma Eksp√≤</label>
                    <select id="voiceFormat">
                        <option value="mp3" selected>MP3 - Standard</option>
                        <option value="wav">WAV - Kalite Sipery√®</option>
                        <option value="opus">Opus - Modern & Konprese</option>
                        <option value="ogg">OGG - Open Source</option>
                        <option value="flac">FLAC - Sans P√®t</option>
                    </select>
                </div>
                
                <button class="generate-btn" id="createVoiceBtn" disabled>
                    üéØ Kreye Vwa Natir√®l
                </button>
                
                <p style="text-align: center; margin-top: 15px; opacity: 0.8; font-size: 14px;" id="buttonHint">
                    üí° Pou aktive bouton an: Bay yon non epi upload omwen 1 echantiyon odyo
                </p>
            </div>
            
            <!-- LIBRARY TAB -->
            <div class="tab-content" id="library">
                <div class="info-box">
                    <strong>üìö Bibliyot√®k Vwa:</strong> Tout vwa natir√®l ou kreye yo
                </div>
                
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-number">3</div>
                        <div class="stat-label">Total Vwa</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">8.5</div>
                        <div class="stat-label">Min Odyo</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">12</div>
                        <div class="stat-label">Echantiyon</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">2</div>
                        <div class="stat-label">Pi Wo</div>
                    </div>
                </div>
                
                <div class="voice-library" id="voiceLibrary">
                    <!-- Demo voices -->
                    <div class="voice-card active">
                        <div class="voice-avatar">üë®</div>
                        <div class="voice-name">Vwa Mwen</div>
                        <div class="voice-details">
                            Kalite: Pi Wo<br>
                            Kreye: 2 jou pase
                        </div>
                        <div class="voice-actions">
                            <button class="action-btn play-btn">‚ñ∂Ô∏è Koute</button>
                            <button class="action-btn delete-btn">üóëÔ∏è Efase</button>
                        </div>
                    </div>
                    
                    <div class="voice-card">
                        <div class="voice-avatar">üë©</div>
                        <div class="voice-name">Marie Vwa</div>
                        <div class="voice-details">
                            Kalite: Nan Mitan<br>
                            Kreye: 1 sem√®n pase
                        </div>
                        <div class="voice-actions">
                            <button class="action-btn play-btn">‚ñ∂Ô∏è Koute</button>
                            <button class="action-btn delete-btn">üóëÔ∏è Efase</button>
                        </div>
                    </div>
                    
                    <div class="voice-card">
                        <div class="voice-avatar">üëî</div>
                        <div class="voice-name">Pwofesyon√®l</div>
                        <div class="voice-details">
                            Kalite: Pi Wo<br>
                            Kreye: 3 jou pase
                        </div>
                        <div class="voice-actions">
                            <button class="action-btn play-btn">‚ñ∂Ô∏è Koute</button>
                            <button class="action-btn delete-btn">üóëÔ∏è Efase</button>
                        </div>
                    </div>
                </div>
                
                <div class="info-box" style="margin-top: 30px;">
                    <strong>üí° Tip:</strong> Ou ka itilize vwa sa yo nan Audiobook, Podcast, ak Video!
                </div>
                
                <h3 style="margin-top: 30px;">üì§ Eksp√≤te Vwa</h3>
                <div class="export-options">
                    <div class="export-btn">
                        <div style="font-size: 2em;">üì¶</div>
                        <div>Achiv ZIP</div>
                    </div>
                    <div class="export-btn">
                        <div style="font-size: 2em;">‚òÅÔ∏è</div>
                        <div>Backup Cloud</div>
                    </div>
                    <div class="export-btn">
                        <div style="font-size: 2em;">üîó</div>
                        <div>Lyen Pataje</div>
                    </div>
                    <div class="export-btn">
                        <div style="font-size: 2em;">üì±</div>
                        <div>App Mobil</div>
                    </div>
                </div>
            </div>
            
            <!-- TEST TAB -->
            <div class="tab-content" id="test">
                <div class="info-box">
                    <strong>üß™ Test Vwa:</strong> Eseye vwa natir√®l ou yo ak t√®ks diferan
                </div>
                
                <div class="option-group">
                    <label>üó£Ô∏è Chwazi Vwa</label>
                    <select id="testVoiceSelect">
                        <option>Vwa Mwen (Pi Wo)</option>
                        <option>Marie Vwa (Nan Mitan)</option>
                        <option>Pwofesyon√®l (Pi Wo)</option>
                    </select>
                </div>
                
                <div class="test-section">
                    <h3>üìù T√®ks pou teste</h3>
                    <textarea id="testText" style="min-height: 150px;" placeholder="Ekri t√®ks ou vle vwa a li...

Egzanp:
Bonjou! Mwen se yon vwa natir√®l ki kreye espesyalman pou ou. Mwen ka li nenp√≤t t√®ks an Krey√≤l Ayisyen oswa l√≤t lang.">Bonjou! Sa se yon test pou vwa natir√®l mwen an. √àske li sonnen byen? Mwen espere w renmen l!</textarea>
                </div>
                
                <div class="option-group">
                    <label>‚ö° Vit√®s</label>
                    <select id="testSpeed">
                        <option>Ralanti (0.75x)</option>
                        <option selected>N√≤mal (1.0x)</option>
                        <option>Rapid (1.25x)</option>
                        <option>Tre Rapid (1.5x)</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label>üéµ Ton</label>
                    <select id="testPitch">
                        <option>Tre Ba (-2)</option>
                        <option>Ba (-1)</option>
                        <option selected>N√≤mal (0)</option>
                        <option>Wo (+1)</option>
                        <option>Tre Wo (+2)</option>
                    </select>
                </div>
                
                <button class="generate-btn" id="testVoiceBtn">
                    üéß Teste Vwa
                </button>
                
                <div id="testResult" style="display: none; margin-top: 20px;">
                    <audio controls style="width: 100%; border-radius: 10px;"></audio>
                </div>
            </div>
            
            <!-- Progress Section -->
            <div class="progress-section" id="progressSection">
                <h3>‚è≥ Ap kreye vwa natir√®l ou a...</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill">0%</div>
                </div>
                <p id="progressText">Inisyalizasyon...</p>
            </div>
            
            <!-- Result Section -->
            <div class="result-section" id="resultSection">
                <div class="success-icon">üéâ</div>
                <h2>‚úÖ Vwa Natir√®l Ou a Kreye!</h2>
                
                <div class="info-box">
                    <strong>üìä Detay Vwa:</strong><br>
                    Non: <span id="resultVoiceName">--</span><br>
                    Kalite: <span id="resultQuality">--</span><br>
                    Echantiyon: <span id="resultSamples">--</span><br>
                    Tan total: <span id="resultDuration">--</span>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="download-btn" id="testNewVoiceBtn">
                        üß™ Teste Vwa a
                    </button>
                    <button class="download-btn" id="createAnotherBtn">
                        üîÑ Kreye Yon L√≤t
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Tab switching
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                if (tab.dataset.tab) {
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                }
                
                // Subtab switching
                if (tab.dataset.subtab) {
                    const subtabs = tab.closest('.tabs').querySelectorAll('.tab');
                    const subtabContents = document.querySelectorAll('.subtab-content');
                    
                    subtabs.forEach(t => t.classList.remove('active'));
                    subtabContents.forEach(tc => tc.style.display = 'none');
                    
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.subtab).style.display = 'block';
                }
            });
        });
        
        // Quality selection
        const qualityOptions = document.querySelectorAll('.quality-option');
        let selectedQuality = 'medium';
        
        qualityOptions.forEach(option => {
            option.addEventListener('click', () => {
                qualityOptions.forEach(o => o.classList.remove('selected'));
                option.classList.add('selected');
                selectedQuality = option.dataset.quality;
            });
        });
        
        // Audio upload
        let uploadedSamples = [];
        const audioInput = document.getElementById('audioInput');
        const audioSamples = document.getElementById('audioSamples');
        const createVoiceBtn = document.getElementById('createVoiceBtn');
        
        audioInput.addEventListener('change', (e) => {
            const file = e.target.files[0]; // Only 1 file
            if (file) {
                // Clear previous samples (only 1 allowed)
                uploadedSamples = [];
                
                // Get actual audio duration
                const audio = new Audio(URL.createObjectURL(file));
                audio.addEventListener('loadedmetadata', () => {
                    uploadedSamples.push({
                        name: file.name,
                        size: file.size,
                        duration: Math.floor(audio.duration),
                        file: file // Store actual file for upload
                    });
                    
                    updateSamplesList();
                    checkCanCreate();
                });
            }
        });
        
        function updateSamplesList() {
            const totalDuration = uploadedSamples.reduce((sum, s) => sum + s.duration, 0);
            const minutes = Math.floor(totalDuration / 60);
            const seconds = totalDuration % 60;
            
            document.querySelector('#samplesContainer h3').textContent = 
                `üìÇ Echantiyon Upload (${uploadedSamples.length}/3 min) - ${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            audioSamples.innerHTML = uploadedSamples.map((sample, index) => `
                <div class="sample-card">
                    <div class="sample-icon">üéµ</div>
                    <div class="sample-info">
                        <div class="sample-name">${sample.name}</div>
                        <div class="sample-duration">${Math.floor(sample.duration / 60)}:${(sample.duration % 60).toString().padStart(2, '0')}</div>
                    </div>
                    <button class="remove-sample" data-index="${index}">‚úï</button>
                </div>
            `).join('');
            
            // Add remove listeners
            document.querySelectorAll('.remove-sample').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    uploadedSamples.splice(index, 1);
                    updateSamplesList();
                    checkCanCreate();
                });
            });
        }
        
        function checkCanCreate() {
            const hasName = document.getElementById('voiceName').value.trim() !== '';
            const hasSamples = uploadedSamples.length >= 1;
            const canCreate = hasName && hasSamples;
            
            createVoiceBtn.disabled = !canCreate;
            
            // Update hint visibility
            const buttonHint = document.getElementById('buttonHint');
            if (buttonHint) {
                if (canCreate) {
                    buttonHint.style.display = 'none';
                } else {
                    buttonHint.style.display = 'block';
                    // Show specific hint
                    if (!hasName && !hasSamples) {
                        buttonHint.textContent = 'üí° Pou aktive bouton an: Bay yon non epi upload omwen 1 echantiyon odyo';
                    } else if (!hasName) {
                        buttonHint.textContent = 'üí° Pou aktive bouton an: Bay yon non pou vwa a';
                    } else if (!hasSamples) {
                        buttonHint.textContent = `üí° Pou aktive bouton an: Upload ${1 - uploadedSamples.length} echantiyon ank√≤`;
                    }
                }
            }
        }
        
        document.getElementById('voiceName').addEventListener('input', checkCanCreate);
        
        // Recording
        let isRecording = false;
        let recordingTime = 0;
        let recordingInterval;
        
        const recordBtn = document.getElementById('recordBtn');
        const timer = document.getElementById('timer');
        const recordStatus = document.getElementById('recordStatus');
        
        recordBtn.addEventListener('click', () => {
            if (!isRecording) {
                startRecording();
            } else {
                stopRecording();
            }
        });
        
        function startRecording() {
            isRecording = true;
            recordingTime = 0;
            recordBtn.classList.add('recording');
            recordBtn.textContent = '‚èπÔ∏è';
            recordStatus.textContent = 'Ap anrejistre... Klike pou fini';
            
            recordingInterval = setInterval(() => {
                recordingTime++;
                const minutes = Math.floor(recordingTime / 60);
                const seconds = recordingTime % 60;
                timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        function stopRecording() {
            isRecording = false;
            clearInterval(recordingInterval);
            recordBtn.classList.remove('recording');
            recordBtn.textContent = 'üé§';
            recordStatus.textContent = 'Anrejistreman sove! Klike pou anrejistre ank√≤';
            
            // Add to samples
            uploadedSamples.push({
                name: `Recording ${uploadedSamples.length + 1}`,
                size: 0,
                duration: recordingTime
            });
            
            updateSamplesList();
            checkCanCreate();
            
            timer.textContent = '00:00';
        }
        
        // Create voice
        createVoiceBtn.addEventListener('click', async () => {
            const progressSection = document.getElementById('progressSection');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const resultSection = document.getElementById('resultSection');
            
            // Get form data
            const voiceName = document.getElementById('voiceName').value;
            const voiceLanguage = document.getElementById('voiceLanguage')?.value || 'ht';
            const voiceEmotion = document.getElementById('voiceEmotion')?.value || 'neutral';
            const voiceFormat = document.getElementById('voiceFormat')?.value || 'mp3';
            
            if (!voiceName || uploadedSamples.length < 1) {
                alert('‚ùå Tanpri bay yon non ak omwen 1 echantiyon!');
                return;
            }
            
            progressSection.classList.add('active');
            resultSection.classList.remove('active');
            
            try {
                // Prepare form data
                const formData = new FormData();
                formData.append('name', voiceName);
                formData.append('quality', selectedQuality);
                formData.append('language', voiceLanguage);
                formData.append('emotion', voiceEmotion);
                formData.append('format', voiceFormat);
                
                // Add audio samples
                const audioFiles = Array.from(audioInput.files);
                audioFiles.forEach((file, index) => {
                    formData.append(`sample_${index}`, file);
                });
                
                updateProgress(20, 'Ap voye echantiyon yo...');
                
                // Call API
                const response = await fetch('/api/custom-voice/create', {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.detail || 'Er√® nan pwosesis la');
                }
                
                updateProgress(50, 'Ap antrene mod√®l AI...');
                
                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.message || 'Er√® nan pwosesis la');
                }
                
                updateProgress(100, 'Fini!');
                
                // Show result
                setTimeout(() => {
                    showResult(result.data);
                }, 500);
                
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Er√®: ' + error.message);
                progressSection.classList.remove('active');
            }
        });
        
        function updateProgress(percent, text) {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            progressFill.style.width = percent + '%';
            progressFill.textContent = percent + '%';
            progressText.textContent = text;
        }
        
        // Voice storage (local for now, will sync with database)
        let createdVoices = [];
        
        function showResult(data) {
            const progressSection = document.getElementById('progressSection');
            const resultSection = document.getElementById('resultSection');
            const totalDuration = uploadedSamples.reduce((sum, s) => sum + s.duration, 0);
            
            progressSection.classList.remove('active');
            resultSection.classList.add('active');
            
            // Display voice info
            const voiceName = data?.name || document.getElementById('voiceName').value;
            document.getElementById('resultVoiceName').textContent = voiceName;
            document.getElementById('resultQuality').textContent = 
                selectedQuality === 'basic' ? 'Pi Ba' : 
                selectedQuality === 'medium' ? 'Nan Mitan' : 'Pi Wo';
            document.getElementById('resultSamples').textContent = uploadedSamples.length;
            document.getElementById('resultDuration').textContent = Math.floor(totalDuration / 60) + ' minit ' + (totalDuration % 60) + ' segonn';
            
            // Store voice data locally
            const voiceData = {
                id: data?.voice_id || 'voice_' + Date.now(),
                name: voiceName,
                quality: selectedQuality,
                sample_url: data?.sample_url || '',
                filename: data?.filename || '',
                created_at: new Date().toISOString()
            };
            
            // Add to created voices list
            createdVoices.push(voiceData);
            
            // Update test voice dropdown
            updateTestVoiceDropdown();
            
            // Update voice library
            updateVoiceLibrary();
            
            // Set test audio if available
            if (data && data.sample_url) {
                const testAudio = document.getElementById('testAudio');
                if (testAudio) {
                    testAudio.src = data.sample_url;
                    testAudio.dataset.downloadUrl = data.sample_url;
                    testAudio.dataset.filename = data.filename;
                }
            }
            
            // Show success message with option to test
            setTimeout(() => {
                if (confirm('‚úÖ Vwa natir√®l ou a kreye! √àske w vle teste l kounye a?')) {
                    // Switch to test tab
                    switchToTestTab(voiceData);
                }
            }, 500);
        }
        
        function updateTestVoiceDropdown() {
            const testVoiceSelect = document.getElementById('testVoiceSelect');
            testVoiceSelect.innerHTML = '';
            
            if (createdVoices.length === 0) {
                testVoiceSelect.innerHTML = '<option>Pa gen vwa ank√≤ - Kreye youn!</option>';
            } else {
                createdVoices.forEach(voice => {
                    const option = document.createElement('option');
                    option.value = voice.id;
                    option.textContent = `${voice.name} (${voice.quality === 'basic' ? 'Pi Ba' : voice.quality === 'medium' ? 'Nan Mitan' : 'Pi Wo'})`;
                    option.dataset.sampleUrl = voice.sample_url;
                    testVoiceSelect.appendChild(option);
                });
            }
        }
        
        function updateVoiceLibrary() {
            const libraryGrid = document.querySelector('#library .library-grid');
            if (!libraryGrid) return;
            
            libraryGrid.innerHTML = '';
            
            if (createdVoices.length === 0) {
                libraryGrid.innerHTML = '<p style="text-align: center; opacity: 0.7; grid-column: 1/-1;">Pa gen vwa ank√≤. Kreye premye vwa ou!</p>';
            } else {
                createdVoices.forEach((voice, index) => {
                    const card = document.createElement('div');
                    card.className = 'voice-card';
                    card.innerHTML = `
                        <div class="voice-icon">üó£Ô∏è</div>
                        <div class="voice-name">${voice.name}</div>
                        <div class="voice-quality">${voice.quality === 'basic' ? 'Pi Ba' : voice.quality === 'medium' ? 'Nan Mitan' : 'Pi Wo'}</div>
                        <div class="voice-actions">
                            <button class="play-btn" data-voice-id="${voice.id}">‚ñ∂Ô∏è Jwe</button>
                            <button class="test-btn" data-voice-id="${voice.id}">üß™ Teste</button>
                            <button class="delete-btn" data-voice-id="${voice.id}">üóëÔ∏è</button>
                        </div>
                    `;
                    libraryGrid.appendChild(card);
                });
                
                // Add event listeners
                document.querySelectorAll('.play-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const voiceId = btn.dataset.voiceId;
                        const voice = createdVoices.find(v => v.id === voiceId);
                        if (voice && voice.sample_url) {
                            const audio = new Audio(voice.sample_url);
                            audio.play();
                        }
                    });
                });
                
                document.querySelectorAll('.test-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const voiceId = btn.dataset.voiceId;
                        const voice = createdVoices.find(v => v.id === voiceId);
                        if (voice) {
                            switchToTestTab(voice);
                        }
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const voiceId = btn.dataset.voiceId;
                        if (confirm('√àske w s√®ten w vle efase vwa sa a?')) {
                            createdVoices = createdVoices.filter(v => v.id !== voiceId);
                            updateTestVoiceDropdown();
                            updateVoiceLibrary();
                        }
                    });
                });
            }
        }
        
        function switchToTestTab(voice) {
            // Switch to test tab
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            const testTab = document.querySelector('[data-tab="test"]');
            const testContent = document.getElementById('test');
            
            if (testTab) testTab.classList.add('active');
            if (testContent) testContent.classList.add('active');
            
            // Select the voice in dropdown
            const testVoiceSelect = document.getElementById('testVoiceSelect');
            testVoiceSelect.value = voice.id;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Test voice
        document.getElementById('testVoiceBtn').addEventListener('click', async () => {
            const testResult = document.getElementById('testResult');
            const testText = document.getElementById('testText').value;
            const testVoiceSelect = document.getElementById('testVoiceSelect');
            const selectedVoiceId = testVoiceSelect.value;
            
            if (!testText || testText.trim().length === 0) {
                alert('‚ùå Tanpri ekri yon t√®ks pou teste!');
                return;
            }
            
            // Find selected voice
            const selectedVoice = createdVoices.find(v => v.id === selectedVoiceId);
            
            if (!selectedVoice || !selectedVoice.sample_url) {
                alert('‚ùå Tanpri kreye yon vwa anvan w teste!');
                return;
            }
            
            // Show loading
            const testVoiceBtn = document.getElementById('testVoiceBtn');
            testVoiceBtn.disabled = true;
            testVoiceBtn.textContent = '‚è≥ Ap jenere...';
            
            try {
                // For now, play the existing sample audio
                // In production, this would generate new audio with the test text
                testResult.style.display = 'block';
                
                const audioPlayer = testResult.querySelector('audio');
                if (audioPlayer) {
                    audioPlayer.src = selectedVoice.sample_url;
                    audioPlayer.play();
                }
                
                // Show info message
                setTimeout(() => {
                    alert(`üéß Kounye a w ap koute echantiyon vwa "${selectedVoice.name}".\n\nüí° Pou jenere nouvo odyo ak t√®ks ou ekri a, sa mande yon sist√®m TTS avanse. Pou kounye a, w ka koute echantiyon vwa a.`);
                }, 500);
                
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Er√®: ' + error.message);
            } finally {
                testVoiceBtn.disabled = false;
                testVoiceBtn.textContent = 'üéß Teste Vwa';
            }
        });
        
        // Voice library actions
        document.querySelectorAll('.play-btn').forEach(btn => {
            btn.addEventListener('click', async () => {
                try {
                    // Get voice ID from parent
                    const voiceCard = btn.closest('.voice-card');
                    const voiceId = voiceCard?.dataset.voiceId;
                    
                    if (!voiceId) {
                        alert('‚ùå Pa gen echantiyon pou jwe');
                        return;
                    }
                    
                    // Call API to get sample
                    const response = await fetch(`/api/custom-voice/test/${voiceId}`);
                    const result = await response.json();
                    
                    if (result.success && result.data.sample_url) {
                        const audio = new Audio(result.data.sample_url);
                        audio.play();
                    } else {
                        alert('‚ùå Er√® nan lekti vwa a');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‚ùå Er√®: ' + error.message);
                }
            });
        });
        
        document.querySelectorAll('.delete-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                if (confirm('√àske w s√®ten ou vle efase vwa sa a?')) {
                    e.target.closest('.voice-card').remove();
                }
            });
        });
        
        // Result actions
        document.getElementById('testNewVoiceBtn')?.addEventListener('click', () => {
            tabs.forEach(t => t.classList.remove('active'));
            tabContents.forEach(tc => tc.classList.remove('active'));
            document.querySelector('[data-tab="test"]').classList.add('active');
            document.getElementById('test').classList.add('active');
            document.getElementById('resultSection').classList.remove('active');
        });
        
        document.getElementById('createAnotherBtn')?.addEventListener('click', () => {
            document.getElementById('resultSection').classList.remove('active');
            uploadedSamples = [];
            updateSamplesList();
            document.getElementById('voiceName').value = '';
            document.getElementById('voiceDescription').value = '';
            checkCanCreate();
        });
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        // Initialize on page load
        updateTestVoiceDropdown();
        updateVoiceLibrary();
    </script>
</body>
</html>

